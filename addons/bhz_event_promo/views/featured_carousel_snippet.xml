<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="s_guiabh_featured_carousel" name="GuiaBH - Carrossel de Destaques">
        <section class="s_guiabh_featured_carousel oe_snippet_body py-5"
                 data-snippet="bhz_event_promo.s_guiabh_featured_carousel"
                 data-name="GuiaBH - Carrossel de Destaques"
                 data-limit="12"
                 data-interval="5000">
            <div class="container">
                <t t-set="events" t-value="request.env['event.event'].guiabh_get_featured_events(12)"/>
                <t t-set="uniq" t-value="request.env.context.get('snippet_key') or request.env.uid or 0"/>
                <t t-set="interval" t-value="int(request.env.context.get('interval') or 5000)"/>
                <t t-set="target_id" t-value="'guiabhFeaturedCarousel%s' % uniq"/>
                <div t-att-id="target_id"
                     class="carousel slide guiabh-featured-carousel"
                     t-att-data-bs-ride="events and len(events) &gt; 1 and 'carousel' or None"
                     t-att-data-bs-interval="events and len(events) &gt; 1 and interval or None">

                    <t t-if="events and len(events) &gt; 1">
                    <div class="carousel-indicators o_not_editable" contenteditable="false">
                        <t t-foreach="enumerate(events)" t-as="ev_info">
                            <t t-set="idx" t-value="ev_info[0]"/>
                            <t t-set="ev" t-value="ev_info[1]"/>
                            <button type="button"
                                    t-att-data-bs-target="'#%s' % target_id"
                                    t-att-data-bs-slide-to="idx"
                                    t-att-class="idx == 0 and 'active' or False"
                                    t-att-aria-current="idx == 0 and 'true' or False"
                                    t-att-aria-label="'Slide %s' % (idx + 1)"/>
                        </t>
                    </div>
                    </t>

                    <div class="carousel-inner">
                        <t t-foreach="enumerate(events)" t-as="ev_info">
                            <t t-set="idx" t-value="ev_info[0]"/>
                            <t t-set="ev" t-value="ev_info[1]"/>
                            <div class="carousel-item" t-att-class="idx == 0 and 'active' or False">
                                <a t-att-href="'/agenda/event/%s' % ev.id">
                                    <img class="d-block w-100 guiabh-featured-img"
                                         t-att-alt="ev.name or ''"
                                         t-att-src="ev.promo_cover_image and ('/web/image/event.event/%s/promo_cover_image' % ev.id) or ('/web/image/event.event/%s/image_1920' % ev.id)"/>
                                </a>
                            </div>
                        </t>
                    </div>

                    <t t-if="events and len(events) &gt; 1">
                        <button class="carousel-control-prev o_not_editable" type="button"
                                t-att-data-bs-target="'#%s' % target_id"
                                data-bs-slide="prev" contenteditable="false">
                            <span class="carousel-control-prev-icon" aria-hidden="true"/>
                            <span class="visually-hidden">Anterior</span>
                        </button>
                        <button class="carousel-control-next o_not_editable" type="button"
                                t-att-data-bs-target="'#%s' % target_id"
                                data-bs-slide="next" contenteditable="false">
                            <span class="carousel-control-next-icon" aria-hidden="true"/>
                            <span class="visually-hidden">Pr√≥ximo</span>
                        </button>
                    </t>
                </div>

                <div t-if="not events" class="alert alert-secondary mb-0 text-center js-guiabh-featured-empty">
                    Nenhum evento em destaque no momento.
                </div>
            </div>
        </section>
    </template>
</odoo>
