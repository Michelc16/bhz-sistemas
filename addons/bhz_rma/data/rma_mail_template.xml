<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="email_template_bhz_rma_order" model="mail.template" noupdate="1">
        <field name="name">Pedido de RMA - BHZ</field>

        <!-- modelo do pedido de RMA -->
        <field name="model_id" ref="bhz_rma.model_bhz_rma_order"/>

        <!-- Campos simples usando Jinja (texto puro, não afeta o XML) -->
        <field name="subject">Pedido de RMA {{ object.name }}</field>
        <field name="email_from">{{ object.company_id.email or '' }}</field>
        <field name="email_to">{{ object.partner_id.email or '' }}</field>
        <field name="auto_delete" eval="True"/>
        <field name="lang">{{ object.partner_id.lang or 'pt_BR' }}</field>

        <!-- body_html precisa ser XML/QWeb bem formado -->
        <field name="body_html" type="html">
            <div>
                <p>
                    Olá
                    <t t-out="object.partner_id.name or ''"/>
                    ,
                </p>

                <p>
                    Segue o pedido de RMA número
                    <strong><t t-out="object.name"/></strong>.
                </p>

                <p>
                    Produto:
                    <t t-out="object.product_id.display_name"/>
                    <br/>
                    Quantidade:
                    <t t-out="object.quantity"/>
                    <br/>
                    Tipo de garantia:
                    <t t-out="object.warranty_type"/>
                    <br/>
                    Situação:
                    <t t-out="object.state"/>
                </p>

                <p>Em anexo, o PDF do pedido de RMA.</p>

                <p>
                    Atenciosamente,<br/>
                    <t t-out="object.company_id.name or ''"/>
                </p>
            </div>
        </field>

        <!-- Relatório em anexo -->
        <field name="report_template" ref="bhz_rma.action_report_bhz_rma_order"/>
        <field name="report_name">RMA_{{ object.name }}</field>
    </record>
</odoo>
